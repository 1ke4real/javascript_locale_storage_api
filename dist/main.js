/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/***/ (() => {

eval("var formInput = document.querySelector('#search');\nvar buttonSearch = document.querySelector('.searchbutton');\nvar card = document.querySelector('.result');\nwindow.onload = function () {\n  if (localStorage != null) {\n    setTimeout(function () {\n      document.querySelector('.result').classList.remove('none');\n    }, 2000);\n    var lskey = Object.keys(localStorage);\n    lskey.forEach(function (key) {\n      var jsonData = JSON.parse(localStorage.getItem(key));\n      var jsonPoint = JSON.parse(localStorage.getItem('point-' + jsonData.id));\n      if (jsonData.id != null) {\n        card.innerHTML += '<div class=\"card column is-3 \">' + '            <header class=\"card-header\"><p class=\"label card-header-title\">' + jsonData.label + '</p></header>' + '            <div class=\"card-content\"><span class=\"name\">Nom :' + jsonData.name + '</span> <br>' + '            <span class=\"city\">Ville :' + jsonData.city + '</span> <br>' + '            <span class=\"postcode\">Code Postal :' + jsonData.postcode + '</span></div> <br>' + '        <footer class=\"card-footer\"><button class=\"supp button is-light card-footer-item\">Supprimer</button> <button class=\"voir button is-dark card-footer-item\" data-id=\"' + jsonData.id + '\" >Voir</button></footer></div> <br>';\n        document.querySelector('.mod').innerHTML += '<div class=\"modal\" data-id=\"' + jsonData.id + '\">\\n' + '                <div class=\"modal-background\"></div>\\n' + '                <div class=\"modal-card\">\\n' + '                    <header class=\"modal-card-head\">\\n' + '                        <p class=\"modal-card-title\">' + jsonData.label + '</p>\\n' + '                        <button class=\"delete\" aria-label=\"close\"></button>\\n' + '                    </header>\\n' + '                    <section class=\"modal-card-body\">\\n' + '            <span class=\"label\">' + jsonData.label + '</span> <br>' + '            <span class=\"name\">' + jsonData.name + '</span> <br>' + '            <span class=\"city\">' + jsonData.city + '</span> <br>' + '            <span class=\"postcode\">' + jsonData.postcode + '</span> <br><br>' + '<div class=\"formmodal\">' + '<label for=\"nomPoint\">Nom :</label><input type=\"text\" class=\"nomPoint input\" placeholder=\"Entrez un titre\" id=\"nom' + jsonData.id + '\"> <br>' + '<label for=\"descPoint\">Description :</label><input type=\"text\" class=\"descPoint input\" placeholder=\"Entrez une description\" id=\"desc' + jsonData.id + '\"> <br>' + '<button class=\"SavePoint button is-dark\" data-id=\"' + jsonData.id + '\">Enregistrer</button>' + '</div>' + '                    </section>' + '                </div>\\n' + '            </div>';\n      }\n      document.querySelectorAll('.SavePoint').forEach(function (save) {\n        save.addEventListener('click', function () {\n          if (JSON.parse(localStorage.getItem('point-' + save.dataset.id)) === null) {\n            var pointObject = {\n              'title': document.querySelector('#nom' + save.dataset.id).value,\n              'description': document.querySelector('#desc' + save.dataset.id).value,\n              'idadresse': save.dataset.id,\n              'lat': jsonData.lat,\n              'long': jsonData[\"long\"]\n            };\n            localStorage.setItem('point-' + save.dataset.id, JSON.stringify(pointObject));\n            Swal.fire('Bravo !', 'Nouvel ajout de point', 'success');\n            document.querySelectorAll('.modal').forEach(function (mod) {\n              mod.classList.remove('is-active');\n            });\n          } else {\n            alert('un point d\\'interet existe deja pour cete adresse');\n            document.querySelectorAll('.modal').forEach(function (mod) {\n              mod.classList.remove('is-active');\n            });\n            location.reload();\n          }\n        });\n      });\n      document.querySelectorAll('.supp').forEach(function (button) {\n        button.addEventListener('click', function () {\n          localStorage.removeItem(key);\n          location.reload();\n        });\n      });\n      document.querySelectorAll('.voir').forEach(function (button) {\n        button.addEventListener('click', function () {\n          document.querySelectorAll('.modal').forEach(function (mod) {\n            if (button.dataset.id === mod.dataset.id) {\n              mod.classList.add('is-active');\n            }\n          });\n        });\n      });\n      document.querySelectorAll('.delete').forEach(function (btn) {\n        btn.addEventListener('click', function () {\n          document.querySelectorAll('.modal').forEach(function (mod) {\n            mod.classList.remove('is-active');\n          });\n        });\n      });\n    });\n  }\n  formInput.addEventListener('input', function () {\n    if (formInput.value.length > 0) {\n      document.querySelector('.loader').classList.remove('none');\n    } else {\n      document.querySelector('.loader').classList.add('none');\n    }\n    if (formInput.value.length > 4) {\n      setTimeout(function () {\n        document.querySelector('.loader').classList.add('none');\n        fetch('https://api-adresse.data.gouv.fr/search/?q=' + formInput.value + '&limit=15&autocomplete=0').then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          card.innerHTML = \"\";\n          data.features.forEach(function (values, key) {\n            console.log(values.properties);\n            card.innerHTML += '<div class=\"card column is-3\" data-id=\"' + values.properties.id + '\">' + '           <div class=\"card-header\"> <p class=\"label card-header-title\">' + values.properties.label + '</p></div> <br>' + '           <div class=\"card-content\"> <span class=\"name\">Nom :' + values.properties.name + '</span> <br>' + '<span class=\"city\">Ville :' + values.properties.city + '</span> <br>' + '<span class=\"postcode\">Code Postal :' + values.properties.postcode + '</span></div>' + '       <div class=\"card-footer\"> <button class=\"ajouter button is-dark card-footer-item\" data-id=\"' + values.properties.id + '\">Ajouter</button> </div></div> <br>';\n            document.querySelectorAll('.ajouter').forEach(function (button) {\n              button.addEventListener('click', function () {\n                // const {id, label, name, city, postcode} = values.properties\n                var dataObject = {\n                  'id': values.properties.id,\n                  'label': values.properties.label,\n                  'name': values.properties.name,\n                  'city': values.properties.city,\n                  'postcode': values.properties.postcode,\n                  'lat': values.geometry.coordinates[1],\n                  'long': values.geometry.coordinates[0]\n                };\n                localStorage.setItem(values.properties.id, JSON.stringify(dataObject));\n                location.reload();\n              });\n            });\n          });\n        })[\"catch\"](function (error) {\n          return console.log(error);\n        });\n      }, 1000);\n    }\n  });\n};\n\n//# sourceURL=webpack://td---cdc---copie/./src/app.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/app.js"]();
/******/ 	
/******/ })()
;